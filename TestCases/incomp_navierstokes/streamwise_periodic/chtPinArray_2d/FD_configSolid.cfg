%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%                                                                              %
% SU2 configuration file                                                       %
% Case description: Unit Cell flow around pin array (solid)
% Author: T. Kattmann
% Institution: Robert Bosch GmbH
% Date: 07.06.2019
% File Version 6.2.0 "Falcon"                                                  %
%                                                                              %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% ------------- DIRECT, ADJOINT, AND LINEARIZED PROBLEM DEFINITION ------------%
%
SOLVER= HEAT_EQUATION
RESTART_SOL= NO
READ_BINARY_RESTART= YES
%
%HISTORY_OUTPUT= (ITER, RMS_RES, HEAT)
%OBJECTIVE_FUNCTION= DRAG
OBJECTIVE_FUNCTION= TOTAL_AVG_TEMPERATURE
OPT_OBJECTIVE= AVG_TOTALTEMP
%
OBJECTIVE_WEIGHT= 1.0
%
% ---------------- (SOLIDS) CONDUCTION CONDITION DEFINITION -------------------%
%
INC_NONDIM= DIMENSIONAL
SOLID_TEMPERATURE_INIT= 345.0
SOLID_DENSITY= 2719
%
% ---- IDEAL GAS, POLYTROPIC, VAN DER WAALS AND PENG ROBINSON CONSTANTS -------%
%
SPECIFIC_HEAT_CP = 871.0
%
% --------------------------- THERMAL CONDUCTIVITY MODEL ----------------------%
%
CONDUCTIVITY_MODEL= CONSTANT_PRANDTL
PRANDTL_LAM = 6.99091
% In solver_direct_heat:224 the thermal diff lambda/(cp * rho) is set and later
% used for the viscous res
SOLID_THERMAL_CONDUCTIVITY= 200
%
% -------------------- BOUNDARY CONDITION DEFINITION --------------------------%
%
%MARKER_SYM= ( solid_sym_sides)
%
%MARKER_ISOTHERMAL= (solid_pin1_inner, 300, solid_pin2_inner, 300, solid_pin3_inner, 300, solid_pin1_walls, 300, solid_pin2_walls, 300, solid_pin3_walls, 300)
%
MARKER_HEATFLUX= (solid_pin1_inner, 5e5, solid_pin2_inner, 5e5, solid_pin3_inner, 5e5, solid_pin1_walls, 0.0, solid_pin2_walls, 0.0, solid_pin3_walls, 0.0)
%
% ------------------------ SURFACES IDENTIFICATION ----------------------------%
%
MARKER_PLOTTING = ( solid_pin1_interface, solid_pin2_interface, solid_pin3_interface )
MARKER_MONITORING = ( solid_pin2_inner )
%
% ------------- COMMON PARAMETERS DEFINING THE NUMERICAL METHOD ---------------%
%
NUM_METHOD_GRAD= GREEN_GAUSS
%
CFL_NUMBER= 1e4
CFL_ADAPT= NO
CFL_ADAPT_PARAM= ( 1.0, 0.8, 100.0, 100000.0 )
BETA_FACTOR= 50
MAX_DELTA_TIME= 1.0
%
% ------------------------ LINEAR SOLVER DEFINITION ---------------------------%
%
LINEAR_SOLVER= FGMRES
LINEAR_SOLVER_PREC= ILU
LINEAR_SOLVER_ERROR= 1E-15
LINEAR_SOLVER_ITER= 20
%
% --------------------------- CONVERGENCE PARAMETERS --------------------------%
%
CONV_CRITERIA= RESIDUAL
%RESIDUAL_REDUCTION= 10
CONV_RESIDUAL_MINVAL= -20
CONV_STARTITER= 10000000000
%
% -------------------- HEAT NUMERICAL METHOD DEFINITION -----------------------%
%
CONV_NUM_METHOD_HEAT = SPACE_CENTERED
MUSCL_HEAT= YES
JST_SENSOR_COEFF_HEAT= ( 0.5, 0.15 )
TIME_DISCRE_HEAT= EULER_IMPLICIT
%
% ------------------------- INPUT/OUTPUT INFORMATION --------------------------%
%
%MESH_FILENAME= solid.su2
MESH_FORMAT= SU2
%
SOLUTION_FILENAME= solution_flow
RESTART_FILENAME= solution_flow
%
VOLUME_FILENAME= heat 
SURFACE_FILENAME= surface_heat
WRT_CON_FREQ= 1
WRT_RESIDUALS= YES
WRT_LIMITERS= YES
%
CONV_FILENAME= history
BREAKDOWN_FILENAME= forces_breakdown
VALUE_OBJFUNC_FILENAME= of_eval
GRAD_OBJFUNC_FILENAME= of_grad_solid.csv

SOLUTION_ADJ_FILENAME= solution_adj
RESTART_ADJ_FILENAME= solution_adj
VOLUME_ADJ_FILENAME= adjoint
SURFACE_ADJ_FILENAME= surface_adjoint
